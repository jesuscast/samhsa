"use strict";var emergency=require("./emergency.js"),csrfSafeMethod=function(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)},users_url="https://samhsa-ebdef.firebaseio.com/users/";exports.SocialScreen=React.createClass({displayName:"SocialScreen",getInitialState:function(){return{data:{physician_name:"",physician_number:"",emergency_name:"",emergency_number:""},iteration:0}},componentDidMount:function(){var e=this;$.ajax({async:!0,url:users_url+window.unique_id+"/.json",method:"GET",dataType:"json",complete:function(a){if(window.test_me=a,null!=a.responseJSON){var t=a.responseJSON;window.k=t,e.setState({data:{physician_name:t.physician_name,physician_number:t.physician_number,emergency_name:t.emergency_name,emergency_number:t.emergency_number},iteration:e.state.iteration+1}),$("#physician_name").val(t.physician_name),$("#physician_number").val(t.physician_number),$("#emergency_name").val(t.emergency_name),$("#emergency_number").val(t.emergency_number),localStorage.setItem("physician_number",t.physician_number),localStorage.setItem("physician_name",t.physician_name),localStorage.setItem("emergency_number",t.emergency_number),localStorage.setItem("emergency_name",t.emergency_name)}},beforeSend:function(e,a){csrfSafeMethod(a.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",csrftoken)}})},saveData:function(){var e=this,a=$("#physician_name").val(),t=$("#physician_number").val(),n=$("#emergency_name").val(),c=$("#emergency_number").val();console.log(t+" "+a+" "+c+" "+n),""!=a&&""!=t&&""!=c&&""!=n?!function(){var r={physician_name:a,physician_number:t,emergency_name:n,emergency_number:c};window.sendingMe=r;var l=e;$.ajax({async:!0,url:users_url+window.unique_id+"/.json",method:"PATCH",dataType:"json",data:JSON.stringify(r),complete:function(e){console.log(e),l.setState({data:r,iteration:l.state.iteration+1}),alert("Saved!"),localStorage.setItem("physician_number",r.physician_number),localStorage.setItem("physician_name",r.physician_name),localStorage.setItem("emergency_number",r.emergency_number),localStorage.setItem("emergency_name",r.emergency_name)},beforeSend:function(e,a){csrfSafeMethod(a.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",csrftoken)}})}():console.log("One or more values needs to be filled")},render:function(){return React.createElement("div",{className:"content full"},React.createElement("section",null,React.createElement("header",null,React.createElement("b",null,"My Profile"),React.createElement(emergency.Emergency,null)),React.createElement("article",{className:"drug_article"},React.createElement("h1",{className:"drug_name"},"My Physician")),React.createElement("div",{className:"data_fields"},React.createElement("ul",null,React.createElement("li",null,React.createElement("label",null,"Name: ")," ",React.createElement("input",{id:"physician_name",type:"text",defaultValue:this.state.data.physician_name})),React.createElement("li",null,React.createElement("label",null,"Number: "),React.createElement("input",{id:"physician_number",type:"text",pattern:"\\d*",defaultValue:this.state.data.physician_number})),React.createElement("div",{className:"clear"})),React.createElement("div",{className:"clear"})),React.createElement("article",{className:"drug_article"},React.createElement("h1",{className:"drug_name"},"Emergency Contact")),React.createElement("div",{className:"data_fields"},React.createElement("ul",null,React.createElement("li",null,React.createElement("label",null,"Name: ")," ",React.createElement("input",{id:"emergency_name",type:"text",defaultValue:this.state.data.emergency_name})),React.createElement("li",null,React.createElement("label",null,"Number: "),React.createElement("input",{id:"emergency_number",type:"text",pattern:"\\d*",defaultValue:this.state.data.emergency_number})," "),React.createElement("div",{className:"clear"})),React.createElement("div",{className:"clear"})),React.createElement("div",{className:"save big_btn last_element_i",onClick:this.saveData},"Save"),React.createElement("div",{className:"clear"})))}});