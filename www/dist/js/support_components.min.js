"use strict";window.geocoder;var meetings_url="https://samhsa-ebdef.firebaseio.com/data/",getCookie=function(e){var t=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=jQuery.trim(a[n]);if(o.substring(0,e.length+1)==e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t},csrfSafeMethod=function(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)},LocationComponent=React.createClass({displayName:"LocationComponent",getInitialState:function(){return{lat:0,"long":0,location_name:"",screen_name:"loading"}},onSuccess:function(e){var t=this,a=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);geocoder.geocode({latLng:a},function(a,n){if(n==google.maps.GeocoderStatus.OK)if(a[0]){var o=a[0].formatted_address,c=o.split(","),s=c.length;window.dead=a;var r=(c[s-1],c[s-2]),l=c[s-3],i=a[0].address_components[5].long_name;t.setState({screen_name:"main_screen",lat:e.coords.latitude,"long":e.coords.longitude,location_name:l+", "+r}),t.props.onLocationLoaded(e.coords.latitude,e.coords.longitude,l+", "+r,i)}else alert("address not found");else alert("Geocoder failed due to: "+n)})},onError:function(){alert("code: "+error.code+"\nmessage: "+error.message+"\n")},componentDidMount:function(){navigator.geolocation.getCurrentPosition(this.onSuccess,this.onError)},changeState:function(e){this.setState({screen_name:e})},render:function(){switch(this.state.screen_name){case"loading":return React.createElement("h1",{className:"drug_name"},"Loading Location...");case"main_screen":return React.createElement("div",{className:"your_location",onClick:this.changeState.bind(this,"change_location")},React.createElement("span",null,"Closest to ",React.createElement("i",{className:"fa fa-location-arrow fa-lg"})," ",this.state.location_name),React.createElement("sub",null,"Click to Change"));case"change_location":return React.createElement("div",{className:"your_location",onClick:this.changeState.bind(this,"change_location")},React.createElement("span",null,"Change Location:"),React.createElement("input",{type:"text"}));default:return React.createElement("b",null,"Error")}}}),MeetingsList=React.createClass({displayName:"MeetingsList",render:function(){var e=[];console.log(this.props.itemsData);for(var t=0;t<this.props.itemsData.length;t++)e.push(React.createElement("li",null,React.createElement("span",{className:"title_event"},this.props.itemsData[t].name),React.createElement("b",null,"When"),React.createElement("span",null,this.props.itemsData[t].day+", "+this.props.itemsData[t].time),React.createElement("br",null),React.createElement("b",null,"Where"),React.createElement("span",null,this.props.itemsData[t].location),React.createElement("br",null),React.createElement("b",null,"Contact:"),React.createElement("span",null,this.props.itemsData[t].contact),React.createElement("br",null)));return React.createElement("ul",{className:"events"},e,React.createElement("div",{className:"clear"}))}});exports.SupportScreen=React.createClass({displayName:"SupportScreen",getInitialState:function(){return{screen:"loading",lat:0,"long":0,location_name:"",long_state_name:"",items:[]}},changeState:function(e){this.setState({screen:e})},onLocationLoaded:function(e,t,a,n){this.setState({lat:e,"long":t,location_name:a,long_state_name:n}),this.findMeetings()},findMeetings:function(){var e=this;""!=this.state.long_state_name?$.ajax({async:!0,url:meetings_url+"/"+this.state.long_state_name+"/.json",method:"GET",dataType:"json",complete:function(t){for(var a=t.responseJSON,n=Object.keys(a),o=[],c=0;c<n.length;c++)for(var s=Object.keys(a[n[c]]),r=0;r<s.length;r++)o.push(a[n[c]][s[r]]);e.setState({items:o})},beforeSend:function(e,t){csrfSafeMethod(t.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",csrftoken)}}):console.log("asdasd")},render:function(){switch(this.state.screen){case"loading":return React.createElement("div",{className:"content support_component",id:"specific_drug"},React.createElement("section",null,React.createElement("header",null,React.createElement("b",null,"support")),React.createElement("article",{className:"drug_article"},React.createElement("h1",{className:"drug_name"},"Meetings"),React.createElement(LocationComponent,{onLocationLoaded:this.onLocationLoaded}),React.createElement(MeetingsList,{itemsData:this.state.items})),React.createElement("div",{className:"clear"})));default:return React.createElement("span",null,"sad")}}});